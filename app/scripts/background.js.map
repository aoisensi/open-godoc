{"version":3,"sources":["../scripts.babel/background.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,QAAQ,GAAG;AACb,cAAY,EAAE,mBAAC,MAAM,EAAK;AACxB,QAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;AACrB,aAAO,IAAI,CAAC;KACb;AACD,QAAI,OAAO,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;AAC5E,QAAI,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;AACrC,aAAO,IAAI,CAAC;KACb;AACD,WAAO,aAAa,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;GACpD;CACF,CAAC;;AAEF,SAAS,KAAK,CAAC,IAAI,EAAE;AACnB,MAAI,GAAG,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;AACxB,MAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACrC,MAAI,OAAO,KAAK,SAAS,EAAE;AACzB,WAAO,IAAI,CAAC;GACb;AACD,MAAI,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACrC,MAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,MAAI,IAAI,GAAG,IAAI,cAAc,EAAE,CAAC;AAChC,MAAI,CAAC,IAAI,CAAC,KAAK,EAAE,mBAAmB,GAAG,IAAI,EAAE,KAAK,CAAC,CAAC;AACpD,MAAI,CAAC,IAAI,EAAE,CAAC;AACZ,MAAI,IAAI,CAAC,MAAM,KAAK,GAAG,EAAE;AACvB,WAAO,IAAI,CAAC;GACb;AACD,SAAO,IAAI,CAAC;CACb;;AAED,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,UAAC,KAAK,EAAE,UAAU,EAAE,GAAG,EAAK;AAC5D,MAAI,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE;AAC3B,UAAM,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;GAC/B;CACF,CAAC,CAAC;;AAEH,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,UAAA,GAAG,EAAI;AAC7C,MAAI,GAAG,GAAG,mBAAmB,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC/C,QAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AACjB,OAAG,EAAE,GAAG;GACT,CAAC,CAAC;CACJ,CAAC,CAAC","file":"background.js","sourcesContent":["'use strict';\n\nvar services = {\n  'github.com': (pathes) => {\n    if (pathes.length < 3) {\n      return null;\n    }\n    var ignores = ['issues', 'pulls', 'explore', 'settings', 'blog', 'account'];\n    if (ignores.indexOf(pathes[1]) !== -1) {\n      return null;\n    }\n    return 'github.com/' + pathes[1] + '/' + pathes[2];\n  }\n};\n\nfunction parse(urls) {\n  var url = new URL(urls);\n  var service = services[url.hostname];\n  if (service === undefined) {\n    return null;\n  }\n  var pathes = url.pathname.split('/');\n  var name = service(pathes);\n  var http = new XMLHttpRequest();\n  http.open('GET', 'http://godoc.org/' + name, false);\n  http.send();\n  if (http.status !== 200) {\n    return null;\n  }\n  return name;\n}\n\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if (parse(tab.url) !== null) {\n    chrome.pageAction.show(tabId);\n  }\n});\n\nchrome.pageAction.onClicked.addListener(tab => {\n  var url = 'http://godoc.org/' + parse(tab.url);\n  chrome.tabs.create({\n    url: url\n  });\n});\n"]}